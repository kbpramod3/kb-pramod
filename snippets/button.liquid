{%- doc -%}
  Intended for use in a block similar to the button block.

  @param {string} link - link to render
  @param {object} [block] - The block

  @example
  {% render 'button', link: '/collections/all' %}
{%- enddoc -%}

{% assign block_settings = block.settings %}

<a
  {% if link == blank %}
    role="link"
    aria-disabled="true"
  {% else %}
    href="{{ link }}"
  {% endif %}
  class="
    size-style
    {{ block_settings.style_class }}
    {{ block_settings.style_class }}--{{ block.id }}
    button-with-icon
  "
  style="{% render 'size-style', settings: block_settings %}"
  {%- if block_settings.open_in_new_tab -%}
    target="_blank"
    rel="noopener noreferrer"
  {%- endif -%}
  {{ block.shopify_attributes }}
>
  <span class="button-label">{{ block_settings.label }}</span>
  <span class="button-icon">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="12" fill="none" viewBox="0 0 24 12">
    <path d="M1 6h20M15 2l6 4-6 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</span>
</a>


{% stylesheet %}
  .link {
    text-decoration: none;
    text-decoration-color: currentcolor;

    &:hover {
      color: var(--color-primary-hover);
      text-decoration-color: transparent;
    }
  }
.button-with-icon {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 1rem;
  text-decoration: none;
  color: var(--button-color);
  background-color: var(--button-background-color);
  overflow: hidden;
  transition: color 1s ease;
}

.button-with-icon::before {
  content: "";
  position: absolute;
  inset: 0;
  background-color: var(--button-hover-background-color);
  transform: translateX(-100%);
  transition: transform 1s ease;
  z-index: 0;
  will-change: transform;
}

.button-with-icon:hover::before {
  transform: translateX(0);
}

.button-with-icon span,
.button-with-icon svg {
  position: relative;
  z-index: 1;
  transition: color 1s ease;
}

.button-with-icon:hover span,
.button-with-icon:hover svg {
  color: var(--button-hover-color);
}

{% endstylesheet %}
